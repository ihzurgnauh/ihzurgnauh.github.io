import{d as B,f as E,o as G,a as O,n as k,y as L,q as P,i as S,z as V}from"./app-CVj9sSA9.js";var q=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],f=t=>{let e=0;for(let r=0;r<t.length;r++){let a=t[r],s=q.indexOf(a);e=e*83+s}return e},w=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},v=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},A=t=>t<0?-1:1,x=(t,e)=>A(t)*Math.pow(Math.abs(t),e),C=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},H=t=>{if(!t||t.length<6)throw new C("The blurhash string must be at least 6 characters");let e=f(t[0]),r=Math.floor(e/9)+1,a=e%9+1;if(t.length!==4+2*a*r)throw new C(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*a*r}`)},R=t=>{let e=t>>16,r=t>>8&255,a=t&255;return[w(e),w(r),w(a)]},U=(t,e)=>{let r=Math.floor(t/361),a=Math.floor(t/19)%19,s=t%19;return[x((r-9)/9,2)*e,x((a-9)/9,2)*e,x((s-9)/9,2)*e]},F=(t,e,r,a)=>{H(t),a=a|1;let s=f(t[0]),l=Math.floor(s/9)+1,h=s%9+1,p=(f(t[1])+1)/166,u=new Array(h*l);for(let n=0;n<u.length;n++)if(n===0){let o=f(t.substring(2,6));u[n]=R(o)}else{let o=f(t.substring(4+n*2,6+n*2));u[n]=U(o,p*a)}let i=e*4,c=new Uint8ClampedArray(i*r);for(let n=0;n<r;n++)for(let o=0;o<e;o++){let d=0,_=0,$=0;for(let g=0;g<l;g++)for(let m=0;m<h;m++){let M=Math.cos(Math.PI*o*m/e)*Math.cos(Math.PI*n*g/r),b=u[m+g*h];d+=b[0]*M,_+=b[1]*M,$+=b[2]*M}let T=v(d),j=v(_),z=v($);c[4*o+0+n*i]=T,c[4*o+1+n*i]=j,c[4*o+2+n*i]=z,c[4*o+3+n*i]=255}return c},N=F,y=t=>{const e=t.toString(16);return e.length===1?"0"+e:e},X=(t,e,r)=>"#"+y(t)+y(e)+y(r);function I(t){return t===0?0:`${t}%`}function Y(t,e,r){const a=[];for(let s=0,l=0;s<t.length;s+=4,l++){const h=l%e,p=Math.floor(l/e),u=Math.round(h/(e-1)*100),i=Math.round(p/(r-1)*100),c=t[s],n=t[s+1],o=t[s+2],d=`radial-gradient(at ${I(u)} ${I(i)},${X(c,n,o)},#00000000 50%)`;a.push(d)}return a}function Z(t,e=4,r=3){const a=N(t,e,r);return Y(a,e,r)}function D(t,e=4,r=3){return{backgroundImage:Z(t,e,r).join(",")}}const J=["src","alt","width","height"],K=B({__name:"BlurImage",props:{src:{},alt:{},hash:{},width:{},height:{}},setup(t){const e=t,r=L(!1),a=S(()=>{const l={};if(e.width&&e.height&&(l.aspectRatio=`${e.width} / ${e.height}`),e.hash){const h=D(e.hash);Object.assign(l,h)}return l}),s=()=>{r.value=!0};return(l,h)=>(G(),E("div",{class:"blur-image-wrapper",style:P(a.value)},[O("img",{src:t.src,alt:t.alt,width:t.width,height:t.height,loading:"lazy",class:k(["real-image",{visible:r.value}]),onLoad:s},null,42,J)],4))}}),W=V(K,[["__scopeId","data-v-4bfcf46f"]]);export{W as _};
